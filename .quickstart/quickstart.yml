database_key: mixpanel_database
schema_key: mixpanel_schema

dbt_versions: ">=1.3.0 <3.0.0"

destination_configurations:
  databricks:
    dispatch:
      - macro_namespace: dbt_utils
        search_order: [ 'spark_utils', 'dbt_utils' ]

public_models: [
  "mixpanel__daily_events",
  "mixpanel__sessions",
  "mixpanel__monthly_events",
  "mixpanel__event"
]

supported_vars:
  event_properties_to_pivot:
    type: list
    description: "Additional `EVENT.properties` elements to pivot into columns in `mixpanel__event`"
    display_name: "Additional Event Properties"

  event_custom_columns:
    type: dictionary
    description: "Additional `EVENT` columns to include in `mixpanel__event`"
    display_name: "Additional Event Columns"

  sessionization_inactivity:
    type: integer
    value: 30
    description: "Period of inactivity (in minutes) between events that, if surpassed, indicates the end of a session"
    display_name: "Session Inactivity Timeout (Minutes)"

  session_passthrough_columns:
    type: list
    description: "Additional `EVENT` columns to include in `mixpanel__sessions`. Surfaced values will reflect the first event of the session"
    display_name: "Additional Session Event Columns"

  lookback_window:
    type: integer
    value: 7
    description: "Number of days into the past that the models will look back to capture late-arriving events on incremental runs"
    display_name: "Incremental Run Lookback Window (Days)"

